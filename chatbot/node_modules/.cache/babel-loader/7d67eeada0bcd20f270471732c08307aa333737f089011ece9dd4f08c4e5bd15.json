{"ast":null,"code":"var _jsxFileName = \"/Users/christophergenberg/Desktop/1753 BOT/chatbot/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { ThemeProvider, createTheme } from '@mui/material/styles';\nimport { Box, IconButton, Paper, TextField, CircularProgress, Fade, Chip, Typography, Tooltip } from '@mui/material';\nimport SendIcon from '@mui/icons-material/Send';\nimport ChatIcon from '@mui/icons-material/Chat';\nimport CloseIcon from '@mui/icons-material/Close';\nimport HistoryIcon from '@mui/icons-material/History';\nimport SearchIcon from '@mui/icons-material/Search';\nimport styled, { keyframes } from 'styled-components';\n\n// Improved typography theme\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst theme = createTheme({\n  palette: {\n    primary: {\n      main: '#00937c'\n    },\n    background: {\n      default: '#f8f9fa'\n    },\n    secondary: {\n      main: '#f3f4f6'\n    },\n    text: {\n      primary: '#1a1a1a',\n      secondary: '#4a4a4a'\n    }\n  },\n  typography: {\n    fontFamily: '\"Inter\", \"SF Pro Display\", \"Helvetica Neue\", Arial, sans-serif',\n    h3: {\n      fontWeight: 700,\n      fontSize: '1.1rem',\n      letterSpacing: '-0.02em',\n      color: '#00937c',\n      fontFamily: 'inherit'\n    },\n    body1: {\n      fontSize: '0.98rem',\n      lineHeight: 1.65,\n      letterSpacing: '-0.01em',\n      color: '#1a1a1a'\n    }\n  }\n});\n\n// Animations\nconst fadeInUp = keyframes`\n  from { opacity: 0; transform: translateY(20px) scale(0.98); }\n  to { opacity: 1; transform: translateY(0) scale(1); }\n`;\nconst pulse = keyframes`\n  0% { transform: scale(1); }\n  50% { transform: scale(1.03); }\n  100% { transform: scale(1); }\n`;\nconst FloatingButton = styled(IconButton)`\n  position: fixed !important;\n  bottom: 32px !important;\n  right: 32px !important;\n  width: 64px !important;\n  height: 64px !important;\n  background: linear-gradient(135deg, #00937c 0%, #00b894 100%) !important;\n  color: #fff !important;\n  box-shadow: 0 4px 24px rgba(0,147,124,0.25) !important;\n  z-index: 9999 !important;\n  border-radius: 50% !important;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;\n  &:hover {\n    box-shadow: 0 8px 32px rgba(0,147,124,0.35) !important;\n    transform: scale(1.05) !important;\n    background: linear-gradient(135deg, #00b894 0%, #00937c 100%) !important;\n    animation: ${pulse} 1s ease-in-out;\n  }\n`;\n_c = FloatingButton;\nconst ChatPopup = styled(Paper)`\n  position: fixed;\n  bottom: 112px;\n  right: 32px;\n  width: 380px;\n  max-width: 95vw;\n  height: 600px;\n  display: flex;\n  flex-direction: column;\n  border-radius: 24px;\n  box-shadow: 0 12px 48px rgba(0,0,0,0.15);\n  background: #fff;\n  z-index: 9998;\n  overflow: hidden;\n  animation: ${fadeInUp} 0.4s cubic-bezier(.23,1.01,.32,1) both;\n  font-family: inherit;\n  @media (max-width: 600px) {\n    right: 0;\n    left: 0;\n    bottom: 0;\n    width: 100vw;\n    height: 100vh;\n    border-radius: 0;\n  }\n`;\n_c2 = ChatPopup;\nconst PopupHeader = styled(Box)`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 20px 20px 12px 20px;\n  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);\n  border-bottom: 1px solid rgba(0,0,0,0.06);\n`;\n_c3 = PopupHeader;\nconst HeaderTitle = styled(Typography)`\n  margin: 0;\n  font-size: 1.1rem;\n  font-weight: 700;\n  color: #00937c;\n  font-family: inherit;\n  letter-spacing: -0.02em;\n  text-shadow: 0 1px 0 #fff;\n`;\n_c4 = HeaderTitle;\nconst MessagesArea = styled(Box)`\n  flex: 1;\n  overflow-y: auto;\n  padding: 24px;\n  background: #f8f9fa;\n  font-family: inherit;\n  &::-webkit-scrollbar {\n    width: 6px;\n  }\n  &::-webkit-scrollbar-track {\n    background: transparent;\n  }\n  &::-webkit-scrollbar-thumb {\n    background: rgba(0,0,0,0.1);\n    border-radius: 3px;\n  }\n  &::-webkit-scrollbar-thumb:hover {\n    background: rgba(0,0,0,0.15);\n  }\n`;\n_c5 = MessagesArea;\nconst Bubble = styled(Box).withConfig({\n  shouldForwardProp: prop => prop !== 'isUser'\n})`\n  max-width: 85%;\n  margin: 12px 0;\n  padding: 16px 20px;\n  border-radius: 20px;\n  font-size: 0.98rem;\n  line-height: 1.65;\n  letter-spacing: -0.01em;\n  font-family: inherit;\n  background: ${({\n  isUser\n}) => isUser ? 'linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%)' : '#fff'};\n  color: ${({\n  isUser\n}) => isUser ? '#fff' : '#1a1a1a'};\n  align-self: ${({\n  isUser\n}) => isUser ? 'flex-end' : 'flex-start'};\n  box-shadow: ${({\n  isUser\n}) => isUser ? '0 3px 12px rgba(0,0,0,0.1)' : '0 2px 8px rgba(0,0,0,0.06)'};\n  border-bottom-right-radius: ${({\n  isUser\n}) => isUser ? '6px' : '20px'};\n  border-bottom-left-radius: ${({\n  isUser\n}) => isUser ? '20px' : '6px'};\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  &:hover {\n    transform: translateY(-1px);\n    box-shadow: ${({\n  isUser\n}) => isUser ? '0 4px 16px rgba(0,0,0,0.12)' : '0 3px 12px rgba(0,0,0,0.08)'};\n  }\n  & a {\n    color: ${({\n  isUser\n}) => isUser ? '#fff' : '#00937c'};\n    text-decoration: underline;\n    text-underline-offset: 2px;\n    transition: opacity 0.2s ease;\n    &:hover {\n      opacity: 0.8;\n    }\n  }\n  & span.emoji {\n    font-size: 1.2em;\n    vertical-align: middle;\n  }\n`;\n_c6 = Bubble;\nconst QuickRepliesArea = styled(Box)`\n  padding: 16px 20px;\n  background: #fff;\n  border-top: 1px solid rgba(0,0,0,0.06);\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n`;\n_c7 = QuickRepliesArea;\nconst QuickReplyChip = styled(Chip)`\n  font-size: 0.9rem !important;\n  font-family: inherit !important;\n  background: #f8f9fa !important;\n  border: 1px solid rgba(0,0,0,0.08) !important;\n  color: #4a4a4a !important;\n  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1) !important;\n  cursor: pointer !important;\n  &:hover {\n    background: #e9ecef !important;\n    border-color: rgba(0,0,0,0.12) !important;\n    transform: translateY(-1px) !important;\n  }\n`;\n_c8 = QuickReplyChip;\nconst InputArea = styled(Box)`\n  padding: 20px;\n  background: #fff;\n  border-top: 1px solid rgba(0,0,0,0.06);\n  display: flex;\n  align-items: center;\n  gap: 12px;\n`;\n_c9 = InputArea;\nconst StyledTextField = styled(TextField)`\n  flex: 1;\n  & .MuiOutlinedInput-root {\n    border-radius: 16px;\n    background: #f8f9fa;\n    font-size: 0.98rem;\n    font-family: inherit;\n    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n    &:hover {\n      background: #e9ecef;\n    }\n    &.Mui-focused {\n      background: #fff;\n      box-shadow: 0 0 0 3px rgba(0,147,124,0.1);\n    }\n  }\n  & .MuiOutlinedInput-input {\n    font-family: inherit;\n    letter-spacing: -0.01em;\n  }\n`;\n_c0 = StyledTextField;\nconst HistoryButton = styled(IconButton)`\n  color: #00937c !important;\n  transition: all 0.2s ease !important;\n  &:hover {\n    color: #00b894 !important;\n    transform: translateY(-1px) !important;\n  }\n`;\n_c1 = HistoryButton;\nfunction formatMessage(text) {\n  // Convert markdown links (with or without http(s)://)\n  text = text.replace(/\\[(.*?)\\]\\(([^)]+)\\)/g, (match, label, url) => {\n    let href = url.trim();\n    if (!/^https?:\\/\\//i.test(href)) {\n      // If it starts with www. or just a domain, prepend https://\n      href = 'https://' + href.replace(/^\\/*/, '');\n    }\n    return `<a href=\"${href}\" target=\"_blank\" rel=\"noopener noreferrer\">${label}</a>`;\n  });\n\n  // Format bold text\n  text = text.replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>');\n\n  // Format paragraphs\n  text = text.replace(/\\n{2,}/g, '</p><p>');\n  text = '<p>' + text + '</p>';\n  text = text.replace(/<p><\\/p>/g, '');\n  return text;\n}\nconst AIAvatar = () => /*#__PURE__*/_jsxDEV(\"span\", {\n  style: {\n    display: 'inline-flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    width: 32,\n    height: 32,\n    borderRadius: '50%',\n    background: 'linear-gradient(135deg, #e0e7ef 60%, #b3c0d1 100%)',\n    marginRight: 12,\n    marginTop: 2,\n    boxShadow: '0 2px 8px rgba(34,34,34,0.08)',\n    overflow: 'hidden'\n  },\n  children: /*#__PURE__*/_jsxDEV(\"img\", {\n    src: \"/avatar.png\",\n    alt: \"AI Assistant\",\n    style: {\n      width: '100%',\n      height: '100%',\n      objectFit: 'cover'\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 270,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 257,\n  columnNumber: 3\n}, this);\n_c10 = AIAvatar;\nexport default function App() {\n  _s();\n  const [open, setOpen] = useState(false);\n  const [messages, setMessages] = useState(() => {\n    const savedMessages = localStorage.getItem('chatHistory');\n    return savedMessages ? JSON.parse(savedMessages) : [{\n      text: \"Hej! Jag är 1753 Skincare's AI-assistent och holistiska hudterapeut. Jag kan hjälpa dig med allt från hudvård till hudhälsa! ✨\",\n      isUser: false\n    }];\n  });\n  const [input, setInput] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [showHistory, setShowHistory] = useState(false);\n  const messagesEndRef = useRef(null);\n  const quickReplies = [\"Jag har torr hud, vilka produkter rekommenderar ni?\", \"Hur fungerar ert hudvårdskoncept?\", \"Vart kan jag ladda hem er e-bok?\"];\n\n  // Save chat history to localStorage\n  useEffect(() => {\n    localStorage.setItem('chatHistory', JSON.stringify(messages));\n  }, [messages]);\n  useEffect(() => {\n    var _messagesEndRef$curre;\n    if (open) (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  }, [messages, open]);\n  const handleSend = async (messageText = input) => {\n    if (!messageText.trim() || loading) return;\n    setMessages(prev => [...prev, {\n      text: messageText,\n      isUser: true\n    }]);\n    setInput('');\n    setLoading(true);\n    try {\n      const response = await fetch('http://localhost:5001/api/chat', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          message: messageText\n        })\n      });\n      const data = await response.json();\n      setMessages(prev => [...prev, {\n        text: data.reply,\n        isUser: false\n      }]);\n    } catch {\n      setMessages(prev => [...prev, {\n        text: 'Tyvärr kunde jag inte processa din fråga just nu. Vänligen försök igen eller kontakta christopher@1753skincare.com',\n        isUser: false\n      }]);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleQuickReply = reply => {\n    handleSend(reply);\n  };\n  const clearHistory = () => {\n    setMessages([{\n      text: \"Hej! Jag är 1753 Skincare's AI-assistent och holistiska hudterapeut. Jag kan hjälpa dig med allt från hudvård till hudhälsa! ✨\",\n      isUser: false\n    }]);\n    setShowHistory(false);\n  };\n  return /*#__PURE__*/_jsxDEV(ThemeProvider, {\n    theme: theme,\n    children: [!open && /*#__PURE__*/_jsxDEV(FloatingButton, {\n      onClick: () => setOpen(true),\n      \"aria-label\": \"\\xD6ppna chatt\",\n      children: /*#__PURE__*/_jsxDEV(ChatIcon, {\n        sx: {\n          fontSize: 32\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 9\n    }, this), open && /*#__PURE__*/_jsxDEV(ChatPopup, {\n      children: [/*#__PURE__*/_jsxDEV(PopupHeader, {\n        children: [/*#__PURE__*/_jsxDEV(HeaderTitle, {\n          variant: \"h3\",\n          children: \"Maja Glowberg\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            gap: 1\n          },\n          children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n            title: \"Chatthistorik\",\n            children: /*#__PURE__*/_jsxDEV(HistoryButton, {\n              onClick: () => setShowHistory(!showHistory),\n              size: \"small\",\n              children: /*#__PURE__*/_jsxDEV(HistoryIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 353,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 352,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n            onClick: () => setOpen(false),\n            size: \"small\",\n            \"aria-label\": \"St\\xE4ng chatt\",\n            children: /*#__PURE__*/_jsxDEV(CloseIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 357,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(MessagesArea, {\n        children: [messages.map((msg, i) => /*#__PURE__*/_jsxDEV(Fade, {\n          in: true,\n          children: msg.isUser ? /*#__PURE__*/_jsxDEV(Bubble, {\n            isUser: true,\n            children: msg.text\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 19\n          }, this) : /*#__PURE__*/_jsxDEV(Bubble, {\n            isUser: false,\n            dangerouslySetInnerHTML: {\n              __html: `<span style='display:inline-block;vertical-align:top;'><span style='display:inline-flex;align-items:center;justify-content:center;width:32px;height:32px;border-radius:50%;background:linear-gradient(135deg, #e0e7ef 60%, #b3c0d1 100%);margin-right:12px;margin-top:2px;box-shadow:0 2px 8px rgba(34,34,34,0.08);overflow:hidden;'><img src=\"/avatar.png\" alt=\"AI Assistant\" style=\"width:100%;height:100%;object-fit:cover;\" /></span></span><span style=\"display:inline-block;vertical-align:top;margin-top:4px;\">${formatMessage(msg.text)}</span>`\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 19\n          }, this)\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 15\n        }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: messagesEndRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 11\n      }, this), showHistory && /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          p: 2,\n          bgcolor: '#f8f9fa',\n          borderTop: '1px solid #dee2e6'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body2\",\n          sx: {\n            mb: 1,\n            color: '#495057'\n          },\n          children: \"Chatthistorik sparas lokalt i din webbl\\xE4sare\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n          onClick: clearHistory,\n          size: \"small\",\n          sx: {\n            color: '#dc3545',\n            '&:hover': {\n              color: '#c82333'\n            }\n          },\n          children: \"Rensa historik\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 378,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(QuickRepliesArea, {\n        children: quickReplies.map((reply, i) => /*#__PURE__*/_jsxDEV(QuickReplyChip, {\n          label: reply,\n          onClick: () => handleQuickReply(reply),\n          size: \"small\"\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(InputArea, {\n        children: [/*#__PURE__*/_jsxDEV(StyledTextField, {\n          placeholder: \"Skriv ditt meddelande...\",\n          value: input,\n          onChange: e => setInput(e.target.value),\n          onKeyDown: e => e.key === 'Enter' && handleSend(),\n          disabled: loading,\n          size: \"small\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n          color: \"primary\",\n          onClick: () => handleSend(),\n          disabled: loading || !input.trim(),\n          sx: {\n            backgroundColor: '#00937c',\n            color: 'white',\n            width: 44,\n            height: 44,\n            '&:hover': {\n              backgroundColor: '#00b894'\n            }\n          },\n          children: loading ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n            size: 20,\n            color: \"inherit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 423,\n            columnNumber: 26\n          }, this) : /*#__PURE__*/_jsxDEV(SendIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 423,\n            columnNumber: 75\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 409,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 340,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"xEbGnrKEEuZUKiZwJZO1sslMg9A=\");\n_c11 = App;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0, _c1, _c10, _c11;\n$RefreshReg$(_c, \"FloatingButton\");\n$RefreshReg$(_c2, \"ChatPopup\");\n$RefreshReg$(_c3, \"PopupHeader\");\n$RefreshReg$(_c4, \"HeaderTitle\");\n$RefreshReg$(_c5, \"MessagesArea\");\n$RefreshReg$(_c6, \"Bubble\");\n$RefreshReg$(_c7, \"QuickRepliesArea\");\n$RefreshReg$(_c8, \"QuickReplyChip\");\n$RefreshReg$(_c9, \"InputArea\");\n$RefreshReg$(_c0, \"StyledTextField\");\n$RefreshReg$(_c1, \"HistoryButton\");\n$RefreshReg$(_c10, \"AIAvatar\");\n$RefreshReg$(_c11, \"App\");","map":{"version":3,"names":["React","useState","useRef","useEffect","ThemeProvider","createTheme","Box","IconButton","Paper","TextField","CircularProgress","Fade","Chip","Typography","Tooltip","SendIcon","ChatIcon","CloseIcon","HistoryIcon","SearchIcon","styled","keyframes","jsxDEV","_jsxDEV","theme","palette","primary","main","background","default","secondary","text","typography","fontFamily","h3","fontWeight","fontSize","letterSpacing","color","body1","lineHeight","fadeInUp","pulse","FloatingButton","_c","ChatPopup","_c2","PopupHeader","_c3","HeaderTitle","_c4","MessagesArea","_c5","Bubble","withConfig","shouldForwardProp","prop","isUser","_c6","QuickRepliesArea","_c7","QuickReplyChip","_c8","InputArea","_c9","StyledTextField","_c0","HistoryButton","_c1","formatMessage","replace","match","label","url","href","trim","test","AIAvatar","style","display","alignItems","justifyContent","width","height","borderRadius","marginRight","marginTop","boxShadow","overflow","children","src","alt","objectFit","fileName","_jsxFileName","lineNumber","columnNumber","_c10","App","_s","open","setOpen","messages","setMessages","savedMessages","localStorage","getItem","JSON","parse","input","setInput","loading","setLoading","showHistory","setShowHistory","messagesEndRef","quickReplies","setItem","stringify","_messagesEndRef$curre","current","scrollIntoView","behavior","handleSend","messageText","prev","response","fetch","method","headers","body","message","data","json","reply","handleQuickReply","clearHistory","onClick","sx","variant","gap","title","size","map","msg","i","in","dangerouslySetInnerHTML","__html","ref","p","bgcolor","borderTop","mb","placeholder","value","onChange","e","target","onKeyDown","key","disabled","backgroundColor","_c11","$RefreshReg$"],"sources":["/Users/christophergenberg/Desktop/1753 BOT/chatbot/src/App.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { ThemeProvider, createTheme } from '@mui/material/styles';\nimport { Box, IconButton, Paper, TextField, CircularProgress, Fade, Chip, Typography, Tooltip } from '@mui/material';\nimport SendIcon from '@mui/icons-material/Send';\nimport ChatIcon from '@mui/icons-material/Chat';\nimport CloseIcon from '@mui/icons-material/Close';\nimport HistoryIcon from '@mui/icons-material/History';\nimport SearchIcon from '@mui/icons-material/Search';\nimport styled, { keyframes } from 'styled-components';\n\n// Improved typography theme\nconst theme = createTheme({\n  palette: {\n    primary: { main: '#00937c' },\n    background: { default: '#f8f9fa' },\n    secondary: { main: '#f3f4f6' },\n    text: { primary: '#1a1a1a', secondary: '#4a4a4a' },\n  },\n  typography: {\n    fontFamily: '\"Inter\", \"SF Pro Display\", \"Helvetica Neue\", Arial, sans-serif',\n    h3: {\n      fontWeight: 700,\n      fontSize: '1.1rem',\n      letterSpacing: '-0.02em',\n      color: '#00937c',\n      fontFamily: 'inherit',\n    },\n    body1: {\n      fontSize: '0.98rem',\n      lineHeight: 1.65,\n      letterSpacing: '-0.01em',\n      color: '#1a1a1a',\n    },\n  },\n});\n\n// Animations\nconst fadeInUp = keyframes`\n  from { opacity: 0; transform: translateY(20px) scale(0.98); }\n  to { opacity: 1; transform: translateY(0) scale(1); }\n`;\n\nconst pulse = keyframes`\n  0% { transform: scale(1); }\n  50% { transform: scale(1.03); }\n  100% { transform: scale(1); }\n`;\n\nconst FloatingButton = styled(IconButton)`\n  position: fixed !important;\n  bottom: 32px !important;\n  right: 32px !important;\n  width: 64px !important;\n  height: 64px !important;\n  background: linear-gradient(135deg, #00937c 0%, #00b894 100%) !important;\n  color: #fff !important;\n  box-shadow: 0 4px 24px rgba(0,147,124,0.25) !important;\n  z-index: 9999 !important;\n  border-radius: 50% !important;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;\n  &:hover {\n    box-shadow: 0 8px 32px rgba(0,147,124,0.35) !important;\n    transform: scale(1.05) !important;\n    background: linear-gradient(135deg, #00b894 0%, #00937c 100%) !important;\n    animation: ${pulse} 1s ease-in-out;\n  }\n`;\n\nconst ChatPopup = styled(Paper)`\n  position: fixed;\n  bottom: 112px;\n  right: 32px;\n  width: 380px;\n  max-width: 95vw;\n  height: 600px;\n  display: flex;\n  flex-direction: column;\n  border-radius: 24px;\n  box-shadow: 0 12px 48px rgba(0,0,0,0.15);\n  background: #fff;\n  z-index: 9998;\n  overflow: hidden;\n  animation: ${fadeInUp} 0.4s cubic-bezier(.23,1.01,.32,1) both;\n  font-family: inherit;\n  @media (max-width: 600px) {\n    right: 0;\n    left: 0;\n    bottom: 0;\n    width: 100vw;\n    height: 100vh;\n    border-radius: 0;\n  }\n`;\n\nconst PopupHeader = styled(Box)`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 20px 20px 12px 20px;\n  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);\n  border-bottom: 1px solid rgba(0,0,0,0.06);\n`;\n\nconst HeaderTitle = styled(Typography)`\n  margin: 0;\n  font-size: 1.1rem;\n  font-weight: 700;\n  color: #00937c;\n  font-family: inherit;\n  letter-spacing: -0.02em;\n  text-shadow: 0 1px 0 #fff;\n`;\n\nconst MessagesArea = styled(Box)`\n  flex: 1;\n  overflow-y: auto;\n  padding: 24px;\n  background: #f8f9fa;\n  font-family: inherit;\n  &::-webkit-scrollbar {\n    width: 6px;\n  }\n  &::-webkit-scrollbar-track {\n    background: transparent;\n  }\n  &::-webkit-scrollbar-thumb {\n    background: rgba(0,0,0,0.1);\n    border-radius: 3px;\n  }\n  &::-webkit-scrollbar-thumb:hover {\n    background: rgba(0,0,0,0.15);\n  }\n`;\n\nconst Bubble = styled(Box).withConfig({ shouldForwardProp: (prop) => prop !== 'isUser' })`\n  max-width: 85%;\n  margin: 12px 0;\n  padding: 16px 20px;\n  border-radius: 20px;\n  font-size: 0.98rem;\n  line-height: 1.65;\n  letter-spacing: -0.01em;\n  font-family: inherit;\n  background: ${({ isUser }) => isUser ? 'linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%)' : '#fff'};\n  color: ${({ isUser }) => isUser ? '#fff' : '#1a1a1a'};\n  align-self: ${({ isUser }) => isUser ? 'flex-end' : 'flex-start'};\n  box-shadow: ${({ isUser }) => isUser ? '0 3px 12px rgba(0,0,0,0.1)' : '0 2px 8px rgba(0,0,0,0.06)'};\n  border-bottom-right-radius: ${({ isUser }) => isUser ? '6px' : '20px'};\n  border-bottom-left-radius: ${({ isUser }) => isUser ? '20px' : '6px'};\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  &:hover {\n    transform: translateY(-1px);\n    box-shadow: ${({ isUser }) => isUser ? '0 4px 16px rgba(0,0,0,0.12)' : '0 3px 12px rgba(0,0,0,0.08)'};\n  }\n  & a {\n    color: ${({ isUser }) => isUser ? '#fff' : '#00937c'};\n    text-decoration: underline;\n    text-underline-offset: 2px;\n    transition: opacity 0.2s ease;\n    &:hover {\n      opacity: 0.8;\n    }\n  }\n  & span.emoji {\n    font-size: 1.2em;\n    vertical-align: middle;\n  }\n`;\n\nconst QuickRepliesArea = styled(Box)`\n  padding: 16px 20px;\n  background: #fff;\n  border-top: 1px solid rgba(0,0,0,0.06);\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n`;\n\nconst QuickReplyChip = styled(Chip)`\n  font-size: 0.9rem !important;\n  font-family: inherit !important;\n  background: #f8f9fa !important;\n  border: 1px solid rgba(0,0,0,0.08) !important;\n  color: #4a4a4a !important;\n  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1) !important;\n  cursor: pointer !important;\n  &:hover {\n    background: #e9ecef !important;\n    border-color: rgba(0,0,0,0.12) !important;\n    transform: translateY(-1px) !important;\n  }\n`;\n\nconst InputArea = styled(Box)`\n  padding: 20px;\n  background: #fff;\n  border-top: 1px solid rgba(0,0,0,0.06);\n  display: flex;\n  align-items: center;\n  gap: 12px;\n`;\n\nconst StyledTextField = styled(TextField)`\n  flex: 1;\n  & .MuiOutlinedInput-root {\n    border-radius: 16px;\n    background: #f8f9fa;\n    font-size: 0.98rem;\n    font-family: inherit;\n    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n    &:hover {\n      background: #e9ecef;\n    }\n    &.Mui-focused {\n      background: #fff;\n      box-shadow: 0 0 0 3px rgba(0,147,124,0.1);\n    }\n  }\n  & .MuiOutlinedInput-input {\n    font-family: inherit;\n    letter-spacing: -0.01em;\n  }\n`;\n\nconst HistoryButton = styled(IconButton)`\n  color: #00937c !important;\n  transition: all 0.2s ease !important;\n  &:hover {\n    color: #00b894 !important;\n    transform: translateY(-1px) !important;\n  }\n`;\n\nfunction formatMessage(text) {\n  // Convert markdown links (with or without http(s)://)\n  text = text.replace(/\\[(.*?)\\]\\(([^)]+)\\)/g, (match, label, url) => {\n    let href = url.trim();\n    if (!/^https?:\\/\\//i.test(href)) {\n      // If it starts with www. or just a domain, prepend https://\n      href = 'https://' + href.replace(/^\\/*/, '');\n    }\n    return `<a href=\"${href}\" target=\"_blank\" rel=\"noopener noreferrer\">${label}</a>`;\n  });\n\n  // Format bold text\n  text = text.replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>');\n\n  // Format paragraphs\n  text = text.replace(/\\n{2,}/g, '</p><p>');\n  text = '<p>' + text + '</p>';\n  text = text.replace(/<p><\\/p>/g, '');\n\n  return text;\n}\n\nconst AIAvatar = () => (\n  <span style={{\n    display: 'inline-flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    width: 32,\n    height: 32,\n    borderRadius: '50%',\n    background: 'linear-gradient(135deg, #e0e7ef 60%, #b3c0d1 100%)',\n    marginRight: 12,\n    marginTop: 2,\n    boxShadow: '0 2px 8px rgba(34,34,34,0.08)',\n    overflow: 'hidden'\n  }}>\n    <img \n      src=\"/avatar.png\" \n      alt=\"AI Assistant\" \n      style={{\n        width: '100%',\n        height: '100%',\n        objectFit: 'cover'\n      }}\n    />\n  </span>\n);\n\nexport default function App() {\n  const [open, setOpen] = useState(false);\n  const [messages, setMessages] = useState(() => {\n    const savedMessages = localStorage.getItem('chatHistory');\n    return savedMessages ? JSON.parse(savedMessages) : [\n      { text: \"Hej! Jag är 1753 Skincare's AI-assistent och holistiska hudterapeut. Jag kan hjälpa dig med allt från hudvård till hudhälsa! ✨\", isUser: false }\n    ];\n  });\n  const [input, setInput] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [showHistory, setShowHistory] = useState(false);\n  const messagesEndRef = useRef(null);\n\n  const quickReplies = [\n    \"Jag har torr hud, vilka produkter rekommenderar ni?\",\n    \"Hur fungerar ert hudvårdskoncept?\",\n    \"Vart kan jag ladda hem er e-bok?\"\n  ];\n\n  // Save chat history to localStorage\n  useEffect(() => {\n    localStorage.setItem('chatHistory', JSON.stringify(messages));\n  }, [messages]);\n\n  useEffect(() => {\n    if (open) messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages, open]);\n\n  const handleSend = async (messageText = input) => {\n    if (!messageText.trim() || loading) return;\n    setMessages(prev => [...prev, { text: messageText, isUser: true }]);\n    setInput('');\n    setLoading(true);\n    try {\n      const response = await fetch('http://localhost:5001/api/chat', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ message: messageText })\n      });\n      const data = await response.json();\n      setMessages(prev => [...prev, { text: data.reply, isUser: false }]);\n    } catch {\n      setMessages(prev => [...prev, { text: 'Tyvärr kunde jag inte processa din fråga just nu. Vänligen försök igen eller kontakta christopher@1753skincare.com', isUser: false }]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleQuickReply = (reply) => {\n    handleSend(reply);\n  };\n\n  const clearHistory = () => {\n    setMessages([{ text: \"Hej! Jag är 1753 Skincare's AI-assistent och holistiska hudterapeut. Jag kan hjälpa dig med allt från hudvård till hudhälsa! ✨\", isUser: false }]);\n    setShowHistory(false);\n  };\n\n  return (\n    <ThemeProvider theme={theme}>\n      {!open && (\n        <FloatingButton onClick={() => setOpen(true)} aria-label=\"Öppna chatt\">\n          <ChatIcon sx={{ fontSize: 32 }} />\n        </FloatingButton>\n      )}\n      {open && (\n        <ChatPopup>\n          <PopupHeader>\n            <HeaderTitle variant=\"h3\">Maja Glowberg</HeaderTitle>\n            <Box sx={{ display: 'flex', gap: 1 }}>\n              <Tooltip title=\"Chatthistorik\">\n                <HistoryButton onClick={() => setShowHistory(!showHistory)} size=\"small\">\n                  <HistoryIcon />\n                </HistoryButton>\n              </Tooltip>\n              <IconButton onClick={() => setOpen(false)} size=\"small\" aria-label=\"Stäng chatt\">\n                <CloseIcon />\n              </IconButton>\n            </Box>\n          </PopupHeader>\n          <MessagesArea>\n            {messages.map((msg, i) => (\n              <Fade in={true} key={i}>\n                {msg.isUser ? (\n                  <Bubble isUser>{msg.text}</Bubble>\n                ) : (\n                  <Bubble isUser={false} dangerouslySetInnerHTML={{ __html: `<span style='display:inline-block;vertical-align:top;'><span style='display:inline-flex;align-items:center;justify-content:center;width:32px;height:32px;border-radius:50%;background:linear-gradient(135deg, #e0e7ef 60%, #b3c0d1 100%);margin-right:12px;margin-top:2px;box-shadow:0 2px 8px rgba(34,34,34,0.08);overflow:hidden;'><img src=\"/avatar.png\" alt=\"AI Assistant\" style=\"width:100%;height:100%;object-fit:cover;\" /></span></span><span style=\"display:inline-block;vertical-align:top;margin-top:4px;\">${formatMessage(msg.text)}</span>` }} />\n                )}\n              </Fade>\n            ))}\n            <div ref={messagesEndRef} />\n          </MessagesArea>\n          {showHistory && (\n            <Box sx={{ p: 2, bgcolor: '#f8f9fa', borderTop: '1px solid #dee2e6' }}>\n              <Typography variant=\"body2\" sx={{ mb: 1, color: '#495057' }}>\n                Chatthistorik sparas lokalt i din webbläsare\n              </Typography>\n              <IconButton \n                onClick={clearHistory}\n                size=\"small\"\n                sx={{ \n                  color: '#dc3545',\n                  '&:hover': { color: '#c82333' }\n                }}\n              >\n                Rensa historik\n              </IconButton>\n            </Box>\n          )}\n          <QuickRepliesArea>\n            {quickReplies.map((reply, i) => (\n              <QuickReplyChip\n                key={i}\n                label={reply}\n                onClick={() => handleQuickReply(reply)}\n                size=\"small\"\n              />\n            ))}\n          </QuickRepliesArea>\n          <InputArea>\n            <StyledTextField\n              placeholder=\"Skriv ditt meddelande...\"\n              value={input}\n              onChange={e => setInput(e.target.value)}\n              onKeyDown={e => e.key === 'Enter' && handleSend()}\n              disabled={loading}\n              size=\"small\"\n            />\n            <IconButton \n              color=\"primary\" \n              onClick={() => handleSend()}\n              disabled={loading || !input.trim()}\n              sx={{\n                backgroundColor: '#00937c',\n                color: 'white',\n                width: 44,\n                height: 44,\n                '&:hover': {\n                  backgroundColor: '#00b894'\n                }\n              }}\n            >\n              {loading ? <CircularProgress size={20} color=\"inherit\" /> : <SendIcon />}\n            </IconButton>\n          </InputArea>\n        </ChatPopup>\n      )}\n    </ThemeProvider>\n  );\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}